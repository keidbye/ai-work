# 桌面程序窗口方案（JDK 8 兼容）

## 当前情况

- 您使用 JDK 8（不包含 JavaFX）
- Spring Boot 3.x 不支持内置容器
- 需要真正的桌面应用窗口

---

## 推荐方案：使用系统浏览器控件

### 方案一：使用 KHTML（简单）

**KHTML** 是轻量级的 HTML 浏览器控件，可以直接嵌入到程序窗口中。

**下载地址：** http://www.matters.cn/ khhtml/

**制作步骤：**

1. 下载 KHTML 并解压（约 3MB）
2. 创建启动脚本

```batch
@echo off
chcp 65001 >nul

REM 获取脚本所在目录
set SCRIPT_DIR=%~dp0

REM 启动 Spring Boot
echo 正在启动考勤统计工具...
start /b javaw -jar "%SCRIPT_DIR%\target\ai-work-1.0.0.jar" --server.port=8080

REM 等待服务器启动
timeout /t 5 >nul

REM 使用 KHTML 打开
"%SCRIPT_DIR%\khhtml\khtml.exe" http://localhost:8080

REM 等待用户关闭
echo.
echo 程序已关闭，按任意键退出...
pause >nul
```

---

## 方案二：使用 Launch4j 的高于选项

Launch4j 支持更高级的浏览器配置：

1. 在 Launch4j 中切换到 **"Browser"** 标签
2. **Brower:** 选择 `javaw embedded browser` （使用系统内置浏览器）
3. **Download:** 设置为 `javaw`（Launch4j 会自动下载）
4. 点击 **"Build"** 生成新的 exe

这样程序会在内置浏览器窗口中运行，不需要打开外部浏览器。

---

## 方案三：升级到 JDK 11+（长期方案）

如果您愿意升级 Java，可以使用内置 JavaFX 的版本（JDK 11-15）：

**下载地址：** https://adoptium.net/

**升级后的步骤：**

1. 安装 JDK 11+
2. 修改 pom.xml，添加 JavaFX 依赖：

```xml
<dependency>
    <groupId>org.openjfx</groupId>
    <artifactId>javafx-controls</artifactId>
    <version>11.0.2</version>
</dependency>
```

3. 使用 JavaFX 的桌面应用启动器
4. 打包成 exe

---

## 方案四：使用 JNI 包装（最专业）

使用 **jpackage** 或 **WinRun4j** 将应用打包为原生 Windows 程序：

**特点：**
- 真正的 exe 文件（不依赖用户 Java 版本）
- 内嵌 JRE（Java 运行时）
- 系统托盘图标
- 自定义安装路径

**工具地址：**
- jpackage：https://github.com/jpackage/jpackage
- WinRun4j：https://github.com/winaps/winrun4j

---

## 临时解决方案：创建快捷方式

在当前环境不变的情况下，创建友好的启动方式：

**创建 "考勤统计工具.bat"：**

```batch
@echo off
chcp 65001 >nul
title 考勤统计工具

echo ========================================
echo    考勤统计工具 - 启动程序
echo ========================================
echo.
echo 1. 启动服务...
echo.

REM 启动后端服务（隐藏窗口）
start /b javaw -jar target\ai-work-1.0.0.jar --server.port=8080 >nul 2>&1

REM 等待服务启动
timeout /t 3 >nul

REM 打开浏览器（最大化）
start "" http://localhost:8080

echo ========================================
echo 程序已启动！
echo.
echo 使用说明：
echo 1. 浏览器会自动打开
echo 2. 使用完成后，关闭浏览器窗口
echo 3. 本窗口会自动退出
echo ========================================

timeout /t 3 >nul
```

---

## 需要我帮您实现哪个方案？

1. **方案一**：我帮您下载 KHTML 并制作启动脚本
2. **方案二**：我帮您修改 Launch4j 配置
3. **方案三**：我帮您创建 JavaFX 版本（需要您升级 JDK）
4. **方案四**：我帮您使用 jpackage/WinRun4j 打包

请告诉我选择哪个方案，我立即帮您实现！
